(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{132:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r,a,o=n(29),c=n.n(o),u=n(2),i=n.n(u),l=n(10),s=n.n(l),f=n(21),p=n(133),d=n(101),h=n(0),b=n.n(h),m=n(60),v=n(61),w=n(83),g=n(19),x=n.n(g),E=n(36),k=n(20);function P(){var e=x()(['\n\tpadding: 10px;\n\tfont-family: "PressStart2P_400Regular";\n\ttext-align: center;\n\tcolor: ',";\n\tfont-size: ",";\n\ttext-shadow: ",";\n"]);return P=function(){return e},e}!function(e){e.ORANGE="#ea6718",e.WHITE="white",e.GRAY="gray",e.BLACK="black"}(r||(r={})),function(e){e.CANCELLED="Cancelled by user",e.PERMISSION="Permission error"}(a||(a={}));var O=k.a.Text(P(),(function(e){var t=e.color;return void 0===t?r.WHITE:t}),(function(e){var t=e.fontSize;return(void 0===t?12:t)+"px"}),(function(e){var t=e.shadow;return void 0!==t&&t?"-2px 2px 1px black":"none"}));function j(){var e=x()(["\n\tflex: 1;\n\talign-items: stretch;\n\tjustify-content: center;\n\tflex-direction: ",";\n"]);return j=function(){return e},e}function y(){var e=x()(["\n\tflex: 1;\n\tbackground: ",";\n"]);return y=function(){return e},e}var C=k.a.SafeAreaView(y(),r.ORANGE),A=k.a.View(j(),(function(e){return e.width>1024?"row":"column"}));function S(e){var t=e.width,n=e.header,r=e.footer,a=e.children,o=e.onPressFooter;return b.a.createElement(C,null,b.a.createElement(O,{shadow:!0,fontSize:42},n),b.a.createElement(A,{width:t},a),"function"===typeof o?b.a.createElement(E.a,{onPress:o},b.a.createElement(O,{shadow:!0},r)):b.a.createElement(O,{shadow:!0},r))}function L(){var e=x()(["\n\tflex: 1;\n\twidth: 100%;\n\theight: 100%;\n\tmax-width: 100%;\n\tmax-height: 100%;\n"]);return L=function(){return e},e}var R=k.a.Image(L());function T(){var e=x()(["\n\tflex: 1;\n\twidth: 100%;\n"]);return T=function(){return e},e}function F(){var e=x()(["\n\tflex: 1;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: ",";\n\tbox-shadow: -2px 2px 1px black;\n\tborder-radius: 12px;\n\tmargin: 10px;\n\tpadding: 15px;\n"]);return F=function(){return e},e}var I=k.a.View(F(),r.WHITE),B=k.a.TouchableOpacity(T());function D(e){var t=e.image,n=e.caption,a=e.fallback,o=e.onPress,c=function(){return b.a.createElement(b.a.Fragment,null,b.a.createElement(R,{source:t}),n&&b.a.createElement(O,{color:r.BLACK},n))};return b.a.createElement(I,null,t?"function"===typeof o?b.a.createElement(B,{onPress:o},c()):c():a)}function G(){var e=x()(["\n\tborder: ",";\n"]);return G=function(){return e},e}var N=k.a.TouchableOpacity(G(),(function(e){var t=e.color;return"1px solid "+(void 0===t?r.BLACK:t)}));function U(e){var t=e.children,n=e.onPress,a=e.textColor,o=void 0===a?r.BLACK:a;return b.a.createElement(N,{onPress:n},b.a.createElement(O,{color:o},t))}function W(){var e=x()(["\n\theight: 200px;\n\twidth: 200px;\n\tborder-radius: 100px;\n\tborder: 3px dashed gray;\n\tposition: absolute;\n"]);return W=function(){return e},e}var Y=k.a.TouchableOpacity(W());function K(){var e=x()(["\n\twidth: 185px;\n\theight: 185px;\n\tborder: 3px dashed gray;\n\tposition: absolute;\n"]);return K=function(){return e},e}var z=k.a.View(K()),H=n(70),V=n.n(H),_=n(84),M=n(191),J=new Map([[M.a,_.a],[M.b,_.b]]);function q(e,t){for(var n=atob(e.split(",")[1]),r=new ArrayBuffer(n.length),a=new Uint8Array(r),o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return new Blob([r],{type:t})}var Q=n(14);var X=n(129);var Z=(new Date).getFullYear();function $(){var e,t=Object(w.b)({PressStart2P_400Regular:w.a}),n=s()(t,1)[0],o=function(){var e=Object(h.useState)(Q.a.get("window").width),t=s()(e,2),n=t[0],r=t[1],a=Object(h.useState)(Q.a.get("window").height),o=s()(a,2),c=o[0],u=o[1],i=function(){var e=Q.a.get("window"),t=e.width,n=e.height;r(t),u(n)};return Object(h.useEffect)((function(){return Q.a.addEventListener("change",i),function(){Q.a.removeEventListener("change",i)}}),[]),[{width:n,height:c}]}(),u=s()(o,1)[0],l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allowsEditing:!0,aspect:[4,3],quality:0},t=Object(h.useCallback)((function(e){var t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(null==(t=f.a.platform)?void 0:t.ios)){r.next=12;break}return r.next=3,i.a.awrap(Object(M.c)(e));case 3:if(n=r.sent,"granted"!==n.status){r.next=9;break}return r.abrupt("return",!0);case 9:throw new Error(a.PERMISSION);case 10:r.next=13;break;case 12:return r.abrupt("return",!0);case 13:case"end":return r.stop()}}),null,null,null,Promise)}),[]),n=Object(h.useCallback)((function(n){var r,o,c;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,i.a.awrap(t(n));case 2:if(!u.sent){u.next=11;break}return u.next=5,i.a.awrap(J.get(n)(e));case 5:if(r=u.sent,o=r.cancelled,c=V()(r,["cancelled"]),!o){u.next=10;break}throw new Error(a.CANCELLED);case 10:return u.abrupt("return",c);case 11:case"end":return u.stop()}}),null,null,null,Promise)}),[]);return[function(){return n(M.b)},function(){return n(M.a)}]}(),g=s()(l,2),x=g[0],E=g[1],k=[Object(h.useCallback)((function(e){var t,n,r,a,o,c;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.uri,n=t.split(";")[0].split("/")[1],r=(new Date).getTime().toString()+"."+n,a=q(t,"image/jpeg"),(o=new FormData).append(f.a.manifest.extra.imageProcFormField,a,r),u.next=8,i.a.awrap(fetch(f.a.manifest.extra.imageProcHost,{method:"POST",body:o}));case 8:return c=u.sent,u.abrupt("return",c.json());case 10:case"end":return u.stop()}}),null,null,null,Promise)}),[])],P=s()(k,1)[0],j=function(){var e=Object(h.useRef)(new X.a({domain:f.a.manifest.extra.authDomain,client_id:f.a.manifest.extra.authClientId,redirect_uri:f.a.manifest.extra.authRedirectUri,cacheLocation:"localstorage"})),t=Object(h.useState)(null),n=s()(t,2),r=n[0],a=n[1],o=Object(h.useCallback)((function(){return e.current.logout()}),[e.current]),c=Object(h.useCallback)((function(){return e.current.loginWithPopup().then((function(){return e.current.getUser().then(a)}))}),[e.current]);return Object(h.useEffect)((function(){"/auth"===window.location.pathname&&e.current.handleRedirectCallback().then((function(){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(e.current.getUser());case 2:t=n.sent,a(t),window.history.pushState({},document.title,"");case 5:case"end":return n.stop()}}),null,null,null,Promise)}))}),[]),Object(h.useEffect)((function(){null===r&&e.current.getTokenSilently().then((function(){e.current.getUser().then(a)}))}),[]),[r,c,o]}(),y=s()(j,3),C=y[0],A=y[1],L=y[2],R=Object(h.useState)(null),T=s()(R,2),F=T[0],I=T[1],B=Object(h.useState)(null),G=s()(B,2),N=G[0],W=G[1],K=Object(h.useState)("Waiting\nfor input"),H=s()(K,2),_=H[0],$=H[1],ee=Object(h.useState)(!1),te=s()(ee,2),ne=te[0],re=te[1];Object(h.useEffect)((function(){N&&(C?C&&!F&&(re(!1),$("Loading..."),P(N).then((function(e){I(e),$("Waiting\nfor input")}))):re(!0))}),[N,C]);var ae=Object(h.useCallback)((function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e().then(W));case 1:case"end":return t.stop()}}),null,null,null,Promise)}),[W]),oe=Object(h.useCallback)((function(){p.a({recipients:["askhat.bikmetov@akvelon.com"],ccRecipients:["nail.shakirov@akvelon.com"],subject:"PixelArt feedback"})}),[]),ce=Object(h.useCallback)((function(){W(null),I(null),L()}),[L]),ue=Object(h.useCallback)((function(){var e;(null==(e=f.a.platform)?void 0:e.web)?window.open("https://expo.io/@akvelon/projects/pixelart"):m.a.alert("PixelArt","Akvelon Kazan \xa9 "+Z,[{text:"Close"},{text:"Share Feedback",onPress:oe},{style:"cancel",text:C?"Log Out":"Log In",onPress:C?ce:A}])}),[oe,ce,A,C]),ie=Object(h.useCallback)((function(){var e;(null==(e=f.a.platform)?void 0:e.web)?window.open(F.uri.replace(/^data:image\/[^;]+/,"data:application/octet-stream")):v.a.share({message:"Akvelon PixelArt "+F.uri})}),[F]);return n?b.a.createElement(b.a.Fragment,null,b.a.createElement(d.StatusBar,{style:"auto"}),b.a.createElement(S,c()({},u,{header:"Pixel Art",footer:"Akvelon \xa9 "+Z,onPressFooter:ue}),b.a.createElement(D,{image:N,caption:"Tap to reset",onPress:function(){W(null),I(null)},fallback:function(){var e;return b.a.createElement(b.a.Fragment,null,b.a.createElement(O,{color:r.GRAY},(null==(e=f.a.platform)?void 0:e.web)?"Tap to pick\nan image":"Tap to pick\nor hold to\nlaunch camera"),b.a.createElement(Y,{onPress:function(){return ae(x)},onLongPress:function(){return ae(E)}}))}()}),b.a.createElement(D,{image:F,caption:"Tap to "+((null==(e=f.a.platform)?void 0:e.web)?"open in new tab":"share"),onPress:ie,fallback:b.a.createElement(b.a.Fragment,null,b.a.createElement(z,null),ne?b.a.createElement(b.a.Fragment,null,b.a.createElement(O,{color:r.GRAY},"You need\nto sign up\nto continue"),b.a.createElement(U,{onPress:A},"Sign Up")):b.a.createElement(O,{color:r.GRAY},_))}))):null}},135:function(e,t,n){e.exports=n(186)}},[[135,1,2]]]);
//# sourceMappingURL=app.9ecc96b3.chunk.js.map